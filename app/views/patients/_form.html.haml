= form_for @patient do |f|
  .input.field.span8
    = f.error_messages
  .input.field
    = f.label :refrence_no, :class => 'control-label'
    = f.text_field :refrence_no, :readonly => true
  .input.field
    = f.label :doctor_id
    = f.select "doctor_id", options_from_collection_for_select(@doctors, "id", "name"), include_blank: true
  .input.field
    = f.label :initial_name
    = f.select :initial_name, Patient::INITIAL_NAME, include_blank: true
  .input.field
    = f.label :first_name
    = f.text_field :first_name
  .input.field
    = f.label :last_name
    = f.text_field :last_name
  .input.field
    = label_tag "Test Category "
    = select_tag "test_category_id", options_from_collection_for_select( @test_categories, "id", "name" ), include_blank: "All Categories"
  #testFields
    = render :partial => "test_fields", :locals => { :tests => @tests}
  .textAlignCenter
    = link_to_function "Add Test", "addTest();", :class => "btn enhance-small primary"
  .input.field
    = render :partial => "tests_list"
  .input.field
    = f.label :test_execution_date
    = f.datepicker :test_execution_date
  .input.field
    = f.label :test_delivery_date
    = f.datepicker :test_delivery_date
  .input.field
    = f.label :total_amount
    = f.text_field :total_amount, :readonly => true
  .input.field
    = f.label :advance_payment
    = f.text_field :advance_payment
  .input.field
    = f.label "Doctor Received payment"
    = f.check_box :is_doctor_receoved_payment
  %br
  .ui-dialog-buttonpane.ui-helper-
    .ui-dialog-buttonset.textAlignCenter
      = f.submit 'Save', :class => 'btn primary'
      or
      = link_to 'Cancel', patients_path

:javascript
  $("#patient_doctor_id").combobox();
  $("#patient_initial_name").combobox();
  setChangeEvent("test_category_id");
